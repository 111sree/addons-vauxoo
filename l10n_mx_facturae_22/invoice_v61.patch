=== modified file 'account/account_invoice.py'
--- account/account_invoice.py	2012-03-29 15:43:31 +0000
+++ account/account_invoice.py	2012-06-27 00:53:58 +0000
@@ -397,7 +397,7 @@
         return True
 
     def onchange_partner_id(self, cr, uid, ids, type, partner_id,\
-            date_invoice=False, payment_term=False, partner_bank_id=False, company_id=False):
+            date_invoice=False, payment_term=False, partner_bank_id=False, company_id=False, currency_id=False):
         invoice_addr_id = False
         contact_addr_id = False
         partner_payment_term = False
@@ -467,6 +467,7 @@
         if partner_bank_id != bank_id:
             to_update = self.onchange_partner_bank(cr, uid, ids, bank_id)
             result['value'].update(to_update['value'])
+        result['value']['currency_id'] = currency_id
         return result
 
     def onchange_journal_id(self, cr, uid, ids, journal_id=False, context=None):

=== modified file 'account/account_invoice_view.xml'
--- account/account_invoice_view.xml	2012-02-16 18:50:48 +0000
+++ account/account_invoice_view.xml	2012-06-27 00:53:54 +0000
@@ -262,7 +262,7 @@
                     <field name="currency_id" width="50"/>
                     <button name="%(action_account_change_currency)d" type="action" icon="terp-stock_effects-object-colorize" string="Change" attrs="{'invisible':[('state','!=','draft')]}" groups="account.group_account_user"/>
                     <newline/>
-                    <field string="Customer" name="partner_id" on_change="onchange_partner_id(type,partner_id,date_invoice,payment_term, partner_bank_id,company_id)" groups="base.group_user" context="{'search_default_customer': 1}" options='{"quick_create": false}' domain="[('customer', '=', True)]"/>
+                    <field string="Customer" name="partner_id" on_change="onchange_partner_id(type,partner_id,date_invoice,payment_term, partner_bank_id,company_id, currency_id)" groups="base.group_user" context="{'search_default_customer': 1}" options='{"quick_create": false}' domain="[('customer', '=', True)]"/>
                     <field domain="[('partner_id','=',partner_id)]" name="address_invoice_id" context="{'default_partner_id': partner_id}" options='{"quick_create": false}'/>
                     <field name="fiscal_position" groups="base.group_extended" widget="selection" options='{"quick_create": false}'/>
                     <newline/>

