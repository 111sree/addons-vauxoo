<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<!-- Redeclaration of the wizards defined in email_template -->
		<record model="ir.ui.view" id="email_template_send_wizard_form_facturae">
			<field name="name">email_template.send.wizard.form.facturae</field>
			<field name="model">email_template.send.wizard.facturae</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Send mail Wizard">
					<group col="4" colspan="4">
						<field name="rel_model" colspan="2" />
						<field name="from" required="1" colspan="2" />
					</group>
					<group col="4" colspan="4">
						<group col="6" colspan="4">
							<field name="to" select="1" colspan="4" />
							<newline />
							<field name="cc" select="2" colspan="4" />
							<newline />
							<field name="bcc" select="2" colspan="4" />
							<newline />
							<field name="subject" select="2" colspan="4" attrs="{'required':[('state','=','single')]}" />
							<newline />
							<field name="report" colspan="4" />
						</group>
						<separator string="" colspan="4" />
						<notebook colspan="4">
							<page string="Body (Plain Text)">
								<field name="body_text" select="2" colspan="4" nolabel="1" />
							</page>
							<page string="Body (HTML)">
								<field name="body_html" select="2" colspan="4" nolabel="1" />
							</page>
							<page string="Attachments">
								<label string="Add here all attachments of the current document you want to include in the Email." colspan="4"/>
								<field name="attachment_ids" colspan="4" nolabel="1"/>
							</page>
						</notebook>
						<field name="signature" colspan="4" />
					</group>
					<group col="4" colspan="4" attrs="{'invisible':[('state','!=','single')]}">
						<button icon="gtk-apply" name="sav_to_drafts" string="Save in Drafts" type="object" />
						<button icon="gtk-ok" name="send_mail" string="Send now" type="object" />
						<button icon="gtk-cancel" special="cancel" string="Discard Mail" />
					</group>
					<group col="4" colspan="4" attrs="{'invisible':[('state','=','single')]}">
					    <label string="Tip: Multiple emails are sent in the same language (the first one is proposed). We suggest you send emails in groups according to language." colspan="4"/>
						<field name="requested" />
						<field name="generated" />
						<button icon="gtk-ok" name="get_generated" string="Send all mails" type="object" states="multi" colspan="2" />
						<button icon="gtk-cancel" special="cancel" string="Discard Mail" colspan="2" states="multi" />
					</group>
					<button icon="gtk-ok" special="cancel" string="Close" colspan="4" states="done" />
					<field name="state" />
					<newline />
					<label string="After clicking send all mails, mails will be sent to outbox and cleared in next Send/Recieve" colspan="4"/>
				</form>
			</field>
		</record>
        
        <record model="ir.actions.act_window" id="action_email_template_send_wizard_form_facturae">
            <field name="name">Factura Electronica Email</field>
            <field name="res_model">email_template.send.wizard.facturae</field>
            <field name="src_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="target">new</field>
            <field name="view_id" ref="email_template_send_wizard_form_facturae" />
            <field name="type">ir.actions.act_window</field>
            <field name="auto_refresh" eval="1" />
            <field name="context">{'src_model':'account.invoice','template':'FacturaE','src_rec_id':active_id,'src_rec_ids':active_ids}</field>
        </record>
        <!--<field name="context">{'src_model':'account.invoice','template':'FacturaE','src_rec_id':active_id,'src_rec_ids':active_ids}</field>-->
        <!--<field name="context">{'src_model':'account.invoice','template_id':'1','src_rec_id':active_id,'src_rec_ids':active_ids}</field>-->
        <!--<field name="context">{'src_model': src_obj,'template_id':template_obj.id,'src_rec_id':active_id,'src_rec_ids':active_ids}</field>-->
        <!-- <field name="context">"{'src_model':'%s','template_id':'%d','src_rec_id':active_id,'src_rec_ids':active_ids}" % (src_obj, template_obj.id)</field>  -->
        
        <record model="ir.values" id="email_template_send_wizard_form_facturae_values">
            <field name="model_id" ref="account.model_account_invoice" />
            <field name="object" eval="1" />
            <field name="name">Factura Electronica Email</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.act_window,' + str(ref('action_email_template_send_wizard_form_facturae'))" />
            <field name="key">action</field>
            <field name="model">account.invoice</field>
        </record>
	</data>
</openerp>

